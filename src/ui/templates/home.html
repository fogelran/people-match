<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>People Match</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
    <style>
        :root {
            --ink: #0f172a;
            --glass: rgba(255, 255, 255, 0.08);
            --aqua: #2dd4bf;
            --violet: #8b5cf6;
            --midnight: #0b1021;
            --card-shadow: 0 20px 60px rgba(0, 0, 0, 0.35);
        }
        * { font-family: 'Manrope', system-ui, -apple-system, sans-serif; }
        body {
            background: radial-gradient(circle at 20% 20%, rgba(139, 92, 246, 0.12), transparent 25%),
                        radial-gradient(circle at 80% 0%, rgba(45, 212, 191, 0.18), transparent 25%),
                        linear-gradient(135deg, #0b1021 0%, #0f172a 50%, #0b1021 100%);
            color: #e2e8f0;
            min-height: 100vh;
        }
        .glass-card {
            background: var(--glass);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 16px;
            box-shadow: var(--card-shadow);
            backdrop-filter: blur(12px);
        }
        .hero {
            border-radius: 28px;
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.35), rgba(45, 212, 191, 0.35));
            border: 1px solid rgba(255, 255, 255, 0.18);
            box-shadow: 0 28px 70px rgba(0, 0, 0, 0.35);
        }
        .tagline {
            text-transform: uppercase;
            letter-spacing: 0.12em;
            color: rgba(226, 232, 240, 0.7);
        }
        .pill {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 10px 16px;
            border-radius: 999px;
            background: rgba(255, 255, 255, 0.08);
            font-weight: 700;
            color: #fff;
        }
        .pill .dot {
            width: 12px;
            height: 12px;
            background: linear-gradient(135deg, var(--aqua), var(--violet));
            border-radius: 50%;
            box-shadow: 0 0 12px rgba(45, 212, 191, 0.7);
        }
        .cta-btn {
            background: linear-gradient(135deg, var(--aqua), var(--violet));
            border: none;
            color: #0b1021;
            font-weight: 800;
            padding: 12px 20px;
            border-radius: 14px;
            box-shadow: 0 18px 38px rgba(45, 212, 191, 0.25);
        }
        .label {
            font-weight: 700;
            color: rgba(226, 232, 240, 0.8);
        }
        .input-soft {
            background: rgba(255, 255, 255, 0.06);
            border: 1px solid rgba(255, 255, 255, 0.08);
            color: #e2e8f0;
        }
        .input-soft:focus {
            box-shadow: 0 0 0 3px rgba(45, 212, 191, 0.25);
            border-color: rgba(45, 212, 191, 0.6);
        }
        .chip {
            padding: 6px 10px;
            background: rgba(255, 255, 255, 0.08);
            border-radius: 10px;
            font-size: 0.9rem;
        }
        .badge-outline {
            border: 1px solid rgba(255, 255, 255, 0.18);
            color: #e2e8f0;
            background: rgba(255, 255, 255, 0.04);
        }
        .sticky-match {
            position: sticky;
            bottom: 16px;
            z-index: 3;
        }
    </style>
</head>
<body class="pb-5">
<div class="container py-5">
    <header class="hero p-4 p-md-5 mb-4">
        <div class="row align-items-center g-4">
            <div class="col-lg-8">
                <div class="pill mb-3"><span class="dot"></span> New revolutionary way to search</div>
                <h1 class="display-4 fw-bold mb-3 text-white">Welcome to the new, playful way to meet your match.</h1>
                <p class="lead mb-4">Sign in once, drop your deal-breakers, and glide through a game-like flow that finds you the person who fits.</p>
                <div class="d-flex flex-wrap gap-3 align-items-center">
                    <div class="d-flex align-items-center gap-2">
                        <span class="badge bg-success text-dark fw-bold px-3 py-2">Live</span>
                        <span class="text-white-50">Real-time matching, evolving with every answer.</span>
                    </div>
                    <div class="d-flex align-items-center gap-2">
                        <span class="badge bg-info text-dark fw-bold px-3 py-2">Adaptive</span>
                        <span class="text-white-50">We surface questions you have not conquered yet.</span>
                    </div>
                </div>
            </div>
            <div class="col-lg-4">
                <div class="glass-card p-4 h-100">
                    <div class="d-flex align-items-center justify-content-between mb-3">
                        <span class="label">Sign in once</span>
                        <span class="badge bg-primary">Step 0</span>
                    </div>
                    <form action="{{ url_for('register') }}" method="post" class="vstack gap-3">
                        <div>
                            <label class="label mb-2" for="register-name">Your name</label>
                            <input type="text" id="register-name" name="user_name" class="form-control input-soft" placeholder="Skyler" required>
                        </div>
                        <div>
                            <label class="label mb-2" for="register-photo">Profile image URL (optional)</label>
                            <input type="url" id="register-photo" name="profile_image_url" class="form-control input-soft" placeholder="https://images.example/me.jpg">
                        </div>
                        <div>
                            <label class="label mb-2" for="register-tagline">Tagline (optional)</label>
                            <input type="text" id="register-tagline" name="tagline" class="form-control input-soft" placeholder="Ocean lover, chai enthusiast">
                        </div>
                        <button class="cta-btn w-100" type="submit">Enter the arena</button>
                    </form>
                </div>
            </div>
        </div>
    </header>

    {% if results is defined %}
    <div class="alert alert-info glass-card border-0 text-white">
        {% if results %}
            <strong>Matches:</strong> {{ results | join(", ") }}
        {% else %}
            <strong>No matches yet.</strong> Try adjusting your filters.
        {% endif %}
    </div>
    {% endif %}

    {% if match_name is defined %}
    <div class="alert alert-success glass-card border-0 text-white">
        {% if match_name %}
            <strong>Best match found!</strong> {{ match_name }} lines up with your preferences.
        {% else %}
            <strong>No perfect match yet.</strong> Add a few more preferences or wait for more answers.
        {% endif %}
    </div>
    {% endif %}

    <div class="row g-4 mb-4">
        <div class="col-lg-4">
            <div class="glass-card p-4 h-100">
                <div class="d-flex align-items-center justify-content-between mb-3">
                    <div>
                        <div class="tagline mb-1">Game tile 1</div>
                        <h2 class="h4 fw-bold text-white mb-0">Ask your question</h2>
                    </div>
                    <span class="badge badge-outline">Auto-stored</span>
                </div>
                <p class="text-white-50">Plant a yes/no question and the expected answer you want in a partner. Every new prompt instantly joins the question database.</p>
                <form action="{{ url_for('ask_question') }}" method="post" class="vstack gap-3">
                    <div>
                        <label class="label mb-2" for="ask-name">Your name</label>
                        <input type="text" id="ask-name" name="user_name" class="form-control input-soft" placeholder="Skyler" required>
                    </div>
                    <div>
                        <label class="label mb-2" for="ask-question">Your yes/no question</label>
                        <textarea id="ask-question" name="question_text" class="form-control input-soft" rows="2" placeholder="Do you like sunrise hikes?" required></textarea>
                    </div>
                    <div class="label mb-1">You want them to answer</div>
                    <div class="d-flex gap-3">
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="expected_answer" id="ask-expected-yes" value="yes" checked>
                            <label class="form-check-label" for="ask-expected-yes">Yes</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="expected_answer" id="ask-expected-no" value="no">
                            <label class="form-check-label" for="ask-expected-no">No</label>
                        </div>
                    </div>
                    <button class="cta-btn w-100" type="submit">Save question</button>
                </form>
            </div>
        </div>

        <div class="col-lg-4">
            <div class="glass-card p-4 h-100">
                <div class="d-flex align-items-center justify-content-between mb-3">
                    <div>
                        <div class="tagline mb-1">Game tile 2</div>
                        <h2 class="h4 fw-bold text-white mb-0">Answer questions</h2>
                    </div>
                    <span class="badge badge-outline">Adaptive</span>
                </div>
                <p class="text-white-50">We surface a prompt you have not answered yet. If everything is done, we celebrate you for clearing the board.</p>
                <form action="{{ url_for('index') }}" method="get" class="vstack gap-2 mb-3">
                    <label class="label mb-1" for="focus-user">Enter your name</label>
                    <div class="input-group">
                        <input type="text" id="focus-user" name="focus_user" class="form-control input-soft" placeholder="Skyler" value="{{ focus_user or '' }}" required>
                        <button class="btn btn-outline-info text-white" type="submit">Load my next challenge</button>
                    </div>
                </form>
                {% if focus_user %}
                    {% if suggested_question %}
                        <div class="alert alert-success p-3">
                            <strong>Next up:</strong> {{ suggested_question }}
                        </div>
                        <form action="{{ url_for('answer_question') }}" method="post" class="vstack gap-3">
                            <input type="hidden" name="user_name" value="{{ focus_user }}">
                            <input type="hidden" name="question_text" value="{{ suggested_question }}">
                            <div class="label">Your answer</div>
                            <div class="d-flex gap-3 align-items-center">
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="answer" id="answer-yes" value="yes" checked>
                                    <label class="form-check-label" for="answer-yes">Yes</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="answer" id="answer-no" value="no">
                                    <label class="form-check-label" for="answer-no">No</label>
                                </div>
                            </div>
                            <button class="cta-btn w-100" type="submit">Submit answer</button>
                        </form>
                    {% elif question_status %}
                        <div class="alert alert-info p-3">{{ question_status }}</div>
                    {% endif %}
                {% else %}
                    <div class="alert alert-secondary p-3">
                        Share your name to see the next unanswered prompt.
                    </div>
                {% endif %}
            </div>
        </div>

        <div class="col-lg-4">
            <div class="glass-card p-4 h-100">
                <div class="d-flex align-items-center justify-content-between mb-3">
                    <div>
                        <div class="tagline mb-1">Game tile 3</div>
                        <h2 class="h4 fw-bold text-white mb-0">Question library</h2>
                    </div>
                    <span class="badge badge-outline">Live</span>
                </div>
                <p class="text-white-50">These are the active prompts in play. Every new question appears instantly for the community.</p>
                <div class="d-flex flex-wrap gap-2">
                    {% for question in questions %}
                        <span class="chip">{{ question }}</span>
                    {% endfor %}
                </div>
                <hr class="border-secondary">
                <p class="text-white-50 small mb-1">Starter suggestion: people who like pets</p>
                <div class="badge bg-dark text-white">{{ demo_matches | join(", ") if demo_matches else "No data yet" }}</div>
            </div>
        </div>
    </div>

    <div class="glass-card p-4 mb-5">
        <div class="d-flex flex-column flex-md-row align-items-md-center justify-content-between gap-3">
            <div>
                <div class="tagline mb-1">Call to action</div>
                <h3 class="h4 text-white fw-bold mb-1">Find my match</h3>
                <p class="text-white-50 mb-0">We crunch every answer you want to see and reveal the top fit available right now.</p>
            </div>
            <form action="{{ url_for('best_match') }}" method="post" class="d-flex flex-column flex-md-row gap-3 w-100 w-md-auto">
                <input type="text" name="user_name" class="form-control input-soft" placeholder="Your name" value="{{ focus_user or '' }}" required>
                <button class="cta-btn px-4" type="submit">Find my match</button>
            </form>
        </div>
    </div>

    <div class="sticky-match glass-card p-3">
        <div class="d-flex align-items-center justify-content-between">
            <div class="d-flex align-items-center gap-3">
                <div class="pill mb-0"><span class="dot"></span> Playful trio</div>
                <span class="text-white-50">Ask ➜ Answer ➜ Match — repeat until you win.</span>
            </div>
            <form action="{{ url_for('search') }}" method="post" class="d-none d-md-flex align-items-center gap-2">
                <input type="hidden" name="user_name" value="{{ focus_user or '' }}">
                <select class="form-select input-soft" name="question_1">
                    <option value="">Find people who…</option>
                    {% for question in questions %}
                        <option value="{{ question }}">{{ question }}</option>
                    {% endfor %}
                </select>
                <select class="form-select input-soft" name="answer_1">
                    <option value="yes">say yes</option>
                    <option value="no">say no</option>
                </select>
                <button class="btn btn-outline-light" type="submit">Quick filter</button>
            </form>
        </div>
    </div>
</div>
</body>
</html>
