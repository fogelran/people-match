<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>People Search</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
    <style>
        body { background-color: #f6f7fb; }
        .hero { background: linear-gradient(135deg, #7f5af0, #2cb67d); color: #fff; border-radius: 12px; padding: 32px; }
        .card { border: none; border-radius: 12px; box-shadow: 0 6px 18px rgba(0,0,0,0.08); }
        .section-title { font-weight: 700; letter-spacing: -.01em; }
    </style>
</head>
<body class="pb-5">
<div class="container py-4">
    <header class="hero mb-4 text-center">
        <h1 class="display-5 fw-bold">Welcome to People Search</h1>
        <p class="lead mb-0">Share your yes/no answers and discover the best matches for you.</p>
    </header>

    {% if results is defined %}
    <div class="alert alert-info shadow-sm">
        {% if results %}
            <strong>Matches:</strong> {{ results | join(", ") }}
        {% else %}
            <strong>No matches yet.</strong> Try adjusting your filters.
        {% endif %}
    </div>
    {% endif %}

    <div class="row g-3">
        <div class="col-lg-4 col-md-6">
            <div class="card h-100">
                <div class="card-body">
                    <h2 class="h4 section-title">1. Answer questions</h2>
                    <p class="text-muted">Pick a question and answer Yes or No. Every answer makes matching better.</p>
                    <form action="{{ url_for('answer_question') }}" method="post" class="vstack gap-3">
                        <div>
                            <label class="form-label" for="answer-user-name">Your name</label>
                            <input name="user_name" id="answer-user-name" class="form-control" placeholder="Sam" required>
                        </div>
                        <div>
                            <label class="form-label" for="answer-question">Question</label>
                            <select class="form-select" name="question_text" id="answer-question" required>
                                {% for question in questions %}
                                    <option value="{{ question }}">{{ question }}</option>
                                {% endfor %}
                            </select>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="answer" id="answer-yes" value="yes" checked>
                            <label class="form-check-label" for="answer-yes">Yes</label>
                        </div>
                        <div class="form-check mb-2">
                            <input class="form-check-input" type="radio" name="answer" id="answer-no" value="no">
                            <label class="form-check-label" for="answer-no">No</label>
                        </div>
                        <button class="btn btn-success" type="submit">Submit answer</button>
                    </form>
                </div>
            </div>
        </div>

        <div class="col-lg-4 col-md-6">
            <div class="card h-100">
                <div class="card-body">
                    <h2 class="h4 section-title">2. Ask a question</h2>
                    <p class="text-muted">Add a new yes/no question for everyone to answer.</p>
                    <form action="{{ url_for('ask_question') }}" method="post" class="vstack gap-3">
                        <div>
                            <label class="form-label" for="ask-user-name">Your name</label>
                            <input name="user_name" id="ask-user-name" class="form-control" placeholder="Sam" required>
                        </div>
                        <div>
                            <label class="form-label" for="question-text">Your question</label>
                            <input name="question_text" id="question-text" class="form-control" placeholder="Do you love hiking?" required>
                        </div>
                        <div class="form-label">You'd like your match to answer</div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="expected_answer" id="expected-yes" value="yes" checked>
                            <label class="form-check-label" for="expected-yes">Yes</label>
                        </div>
                        <div class="form-check mb-2">
                            <input class="form-check-input" type="radio" name="expected_answer" id="expected-no" value="no">
                            <label class="form-check-label" for="expected-no">No</label>
                        </div>
                        <button class="btn btn-primary" type="submit">Share my question</button>
                    </form>
                </div>
            </div>
        </div>

        <div class="col-lg-4">
            <div class="card h-100">
                <div class="card-body">
                    <h2 class="h4 section-title">3. Find your match</h2>
                    <p class="text-muted">Choose one or more questions and specify the answers you want to see.</p>
                    <form action="{{ url_for('search') }}" method="post" class="vstack gap-2">
                        {% for idx in range(1, 4) %}
                        <div class="border rounded p-2 mb-2 bg-light">
                            <label class="form-label" for="search-question-{{ idx }}">Question {{ idx }}</label>
                            <select class="form-select mb-2" name="question_{{ idx }}" id="search-question-{{ idx }}">
                                <option value="">-- optional --</option>
                                {% for question in questions %}
                                    <option value="{{ question }}">{{ question }}</option>
                                {% endfor %}
                            </select>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="answer_{{ idx }}" id="answer-yes-{{ idx }}" value="yes">
                                <label class="form-check-label" for="answer-yes-{{ idx }}">Yes</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="answer_{{ idx }}" id="answer-no-{{ idx }}" value="no">
                                <label class="form-check-label" for="answer-no-{{ idx }}">No</label>
                            </div>
                        </div>
                        {% endfor %}
                        <button class="btn btn-dark" type="submit">Search</button>
                    </form>
                    <hr>
                    <p class="small text-muted mb-1">Starter suggestion: people who like pets</p>
                    <div class="badge text-bg-secondary">
                        {{ demo_matches | join(", ") if demo_matches else "No data yet" }}
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
</body>
</html>
